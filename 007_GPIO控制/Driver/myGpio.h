#ifndef MY_GPIO_H
#define MY_GPIO_H

#include "common.h"

typedef struct                   //结构体对齐
{
    uint32_t pin;                // 4字节 - GPIO引脚号
    uint32_t period;             // 4字节 - 闪烁周期
    uint16_t times;              // 2字节 - 预设闪烁总次数
    uint16_t cnt;                // 2字节 - 闪烁控制计数器
    uint16_t times_cnt;          // 2字节 - 记录已闪烁次数
    uint8_t reset;               // 1字节 - 闪烁进程复位标志
    uint8_t end;                 // 1字节 - 闪烁完成标志位
    float light_on_percent;      // 4字节 - 单个周期内点亮时间百分比
} _gpio_control;

extern _gpio_control led0;
extern _gpio_control led1;

void nGpio_init(void);

void task_led1_proc(void);
void task_led0_proc(void);

void led0_setup(uint32_t _period, float _light_on_percent, uint16_t _times);
void led1_setup(uint32_t _period, float _light_on_percent, uint16_t _times);

#endif
